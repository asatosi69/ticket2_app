<h3>『公演』管理ページ</h3><br>
<br>
<br>
<p>『終了フラグ』にレ点が書かれている『公演』は『管理者』しか予約できなくなります。</p>
<p>『終了フラグ』は『受付終了時間』を過ぎたり、『残席数』が『0』を割ると、自動的にレ点がつきます。</p>
<br>
<br>
<%= link_to("公演情報を登録する", new_stage_path) %>
<br>
<br>

<% if @stages.empty? %>

<h1>登録されている『公演情報』はありません</h1>

<% else %>
<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover" style="table-layout:fixed;width:65%">
  <thead>
    <tr>
      <th style="width: 60px"><p class="text-center">編集</p></th>
      <th style="width: 60px"><p class="text-center">削除</p></th>
      <th><p class="text-center">公演</p></th>
      <th><p class="text-center">開演日時</p></th>
      <th style="width: 80px"><p class="text-center">総席数</p></th>
      <th><p class="text-center">受付開始時間</p></th>
      <th><p class="text-center">受付終了時間</p></th>
      <th style="width: 100px"><p class="text-center">終了フラグ</p></th>
      <th style="width: 100px"><p class="text-center">残席数</p>
    </tr>
  </thead>

  <tbody>
    <% @stages.each do |stage| %>
      <tr>
        <td class="align-middle"><%= button_to '編集', edit_stage_path(stage), {method: "get"} %></td>
        <td class="align-middle"><%= button_to '削除', stage_path(stage), {method: "delete"} %></td>
        <td class="align-middle"><%= stage.stage %></td>
        <td class="align-middle"><%= stage.start_time.to_s(:stage_time) %></td>
        <td class="align-middle"><%= stage.total_seats %></td>
        <td class="align-middle"><%= stage.start_time.to_s(:start_time) %></td>
        <td class="align-middle"><%= stage.end_time.to_s(:end_time) %></td>
        <td class="align-middle">
          <% if stage.end_flag %>
            ☑️
          <% else %>
            -
          <% end %>
        </td>
      <td class="align-middle"><%= stage.remaining %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<% end %>
<br>
<%= link_to :back, :style=>"color:#333333" do %>
  <button>戻る</button>
<% end %>
