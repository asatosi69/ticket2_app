<h3>『組み合わせ』管理ページ</h3><br>
<br>
<p>『組み合わせ』の見方（凡例）</p>
<br>
<p>セル内に『受付終了』と書かれている、または『☑️ 』と書かれている『支払方法』/『公演』の組み合わせ</p>
<p>『管理者』は予約可能です。</p>
<p>『取扱者』は予約不可です。</p>
<p>『一般客』は予約不可です</p>
<br>
<p>セル内に『-』と書かれている『支払方法』/『公演』の組み合わせ</p>
<p>『どなたでも』予約可能です。</p>
<br>
<p>セル内右側のチェックボックスにレ点を書いて、ボタン『組み合わせフラグ ON/OFF』を押下すると</p>
<p>セル左側の『☑️ 』/ 『-』が反転します</p>
<br>
<br>

<%= form_tag(connection3_all_path, method: 'patch') do %>
  <div class="table-responsive">
    <table class="table table-striped table-bordered table-hover" style="table-layout:fixed;width:75%">
      <tr>
        <td>
        </td>
        <% @stages.each do |stage| %>
          <th class="align-middle">
            <p class="text-center">
              <%= stage.stage %>
            </p>
          </th>
        <% end %>
      </tr>
      <% @payments.each do |payment| %>
        <tr>
          <th class="align-middle">
            <p class="text-center">
              <%= payment.payment %>
            </p>
          </th>
          <% @stages.each do |stage| %>
            <td class="align-middle">
              <% if stage.end_flag %>
                <p class="text-center">受付終了</p>
              <% else %>
                <% connection = Connection3.find_by(payment_id: payment.id, stage_id: stage.id) %>
                <p class="text-center">
                  <% if connection.invalid_flag %>
                    ☑️ /
                  <% else %>
                    - /
                  <% end %>
                  <%= check_box_tag 'connections[]', connection.id %>
                </p>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
      <p><%= submit_tag "組み合わせフラグ ON/OFF" %></p>
    </table>
  </div>
<% end %>

<%= link_to :back, :style=>"color:#333333" do %>
  <button>戻る</button>
<% end %>

<%= link_to :connections, :style=>"color:#333333" do %>
  <button>『公演』と『チケット種別』の組み合わせ</button>
<% end %>

<%= link_to :connections2_index, :style=>"color:#333333" do %>
  <button>『チケット種別』と『支払方法』の組み合わせ</button>
<% end %>
