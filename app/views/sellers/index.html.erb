<% if current_seller.admin_flag %>
  <h3>『取扱者』管理ページ</h3>
  <br>
  <p>『管理者フラグ』が立っているのが、『管理取扱者』、立っていないのが『一般取扱者』</p>
  <p>ボタン『反転』をクリックすると、『管理者フラグ』を『ON/OFF』します</p>
  <p>『管理者取扱者』は全部の操作が可能ですが、『一般取扱者』は一部の操作のみが可能です。</p>
<% else %>
  <h3>『取扱者』情報ページ</h3>
<% end %>
<br>
<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover" style="table-layout:fixed;width:70%">
    <thead>
      <tr>
        <% if current_seller.admin_flag %>
          <th style="width: 70px"><p class="text-center"> </p></th>
          <th style="width: 70px"><p class="text-center">フラグ反転</p></th>
          <th style="width: 70px"><p class="text-center">削除</p></th>
        <% end %>
        <th style="width: 150px"><p class="text-center">取扱者</p></th>
        <th style="width: 120px"><p class="text-center">管理者フラグ</p></th>
        <th><p class="text-center">予約用URL</p></th>
      </tr>
    </thead>

    <tbody>
      <%= form_tag({ controller: :sellers, action: :mail_all }, method: 'get') do %>
        <% @sellers.each do |seller| %>
          <tr>
            <% if current_seller.admin_flag %>
              <td align="center"><%= check_box_tag 'sellers[]',seller.id %></td>
              <td align="center"><%= button_to '反転', seller_path(seller), {method: "patch"} %></td>
              <td align="center"><%= button_to '削除', seller_path(seller), {method: "delete"} %></td>
            <% end %>
            <td align="center"><%= seller.name %></td>
            <td align="center">
              <% if seller.admin_flag %>
                ☑️
              <% else %>
                -
              <% end %>
            </td>
            <td><%= "#{@host_with_port}/registers/#{seller.id}/new" %></td>
          </tr>
        <% end %>
        <%= submit_tag "一括送信" %>
      <% end %>
      <%= paginate @sellers -%>
    </tbody>
  </table>
</div>
